
# Make DMG palette image v1.1 Mr.Blinky Aug 2024

import os
import sys
from PIL import Image, ImageDraw, ImageFont

palette_data = [
  0x7C, 
  0x08,
  0x12,
  0xA3,
  0xA2,
  0x07,
  0x87,
  0x4B,
  0x20,
  0x65,
  0xA8,
  0x16,
  0xA9,
  0x86,
  0xB1,
  0x68, 
  0xA0,
  0x66,
  0xA1,
  0x30,
  0x3C,
  0x85,
  0x64,
  0x1B,
  0x06,
  0x6F,
  0x6E,
  0xAE,
  0xAF,
  0xB2,
  0xAB,
  0x13,
  0xAD,
  0x4C,
  0xAC,
  0x6A,
  0x2D,
  0x2B,
  0x6D,
  0xBC,
  0x60,
  0xB4,
  0x72,
  0xB5,
  0x6C,
]

palette_offsets = [
  0x80,0xB0,0x40,
  0x88,0x20,0x68,
  0xDE,0x00,0x70,
  0xDE,0x20,0x78,
  0x20,0x20,0x38,
  0x20,0xB0,0x90,
  0x20,0xB0,0xA0,
  0xE0,0xB0,0xC0,
  0x98,0xB6,0x48,
  0x80,0xE0,0x50,
  0x1E,0x1E,0x58,
  0x20,0xB8,0xE0,
  0x88,0xB0,0x10,
  0x20,0x00,0x10,
  0x20,0xE0,0x18,
  0xE0,0x18,0x00,
  0x18,0xE0,0x20,
  0xA8,0xE0,0x20,
  0x18,0xE0,0x00,
  0x20,0x18,0xD8,
  0xC8,0x18,0xE0,
  0x00,0xE0,0x40,
  0x28,0x28,0x28,
  0x18,0xE0,0x60,
  0x20,0x18,0xE0,
  0x00,0x00,0x08,
  0xE0,0x18,0x30,
  0xD0,0xD0,0xD0,
  0x20,0xE0,0xE8,
]

palette_colors = [
  0xFF,0x7F,0xBF,0x32,0xD0,0x00,0x00,0x00,
  0x9F,0x63,0x79,0x42,0xB0,0x15,0xCB,0x04,
  0xFF,0x7F,0x31,0x6E,0x4A,0x45,0x00,0x00,
  0xFF,0x7F,0xEF,0x1B,0x00,0x02,0x00,0x00,
  0xFF,0x7F,0x1F,0x42,0xF2,0x1C,0x00,0x00,
  0xFF,0x7F,0x94,0x52,0x4A,0x29,0x00,0x00,
  0xFF,0x7F,0xFF,0x03,0x2F,0x01,0x00,0x00,
  0xFF,0x7F,0xEF,0x03,0xD6,0x01,0x00,0x00,
  0xFF,0x7F,0xB5,0x42,0xC8,0x3D,0x00,0x00,
  0x74,0x7E,0xFF,0x03,0x80,0x01,0x00,0x00,
  0xFF,0x67,0xAC,0x77,0x13,0x1A,0x6B,0x2D,
  0xD6,0x7E,0xFF,0x4B,0x75,0x21,0x00,0x00,
  0xFF,0x53,0x5F,0x4A,0x52,0x7E,0x00,0x00,
  0xFF,0x4F,0xD2,0x7E,0x4C,0x3A,0xE0,0x1C,
  0xED,0x03,0xFF,0x7F,0x5F,0x25,0x00,0x00,
  0x6A,0x03,0x1F,0x02,0xFF,0x03,0xFF,0x7F,
  0xFF,0x7F,0xDF,0x01,0x12,0x01,0x00,0x00,
  0x1F,0x23,0x5F,0x03,0xF2,0x00,0x09,0x00,
  0xFF,0x7F,0xEA,0x03,0x1F,0x01,0x00,0x00,
  0x9F,0x29,0x1A,0x00, 0xC,0x00,0x00,0x00,
  0xFF,0x7F,0x7F,0x02,0x1F,0x00,0x00,0x00,
  0xFF,0x7F,0xE0,0x03,0x06,0x02,0x20,0x01,
  0xFF,0x7F,0xEB,0x7E,0x1F,0x00,0x00,0x7C,
  0xFF,0x7F,0xFF,0x3F,0x00,0x7E,0x1F,0x00,
  0xFF,0x7F,0xFF,0x03,0x1F,0x00,0x00,0x00,
  0xFF,0x03,0x1F,0x00, 0xC,0x00,0x00,0x00,
  0xFF,0x7F,0x3F,0x03,0x93,0x01,0x00,0x00,
  0x00,0x00,0x00,0x42,0x7F,0x03,0xFF,0x7F,
  0xFF,0x7F,0x8C,0x7E,0x00,0x7C,0x00,0x00,
  0xFF,0x7F,0xEF,0x1B,0x80,0x61,0x00,0x00,
]
 
img = Image.new("RGB", (450, 930),(224,224,224)) 
canvas = ImageDraw.Draw(img)   
font = ImageFont.truetype('arialbd.ttf', 16)  
for i in range(3):
  canvas.text((48+i*136, 2),["OBJ0","OBJ1","BG0"][i], font = font, align ="left", fill ="black")
  
y= 20
for i in range(45):
  x= 10
  for t in range(3):
    n = palette_data[i] & 0x1F
    f = palette_data[i] >> 5
    p = palette_offsets[3 * n + 2] # BG as default
    if (t == 0) and (f & 1): p = palette_offsets[3 * n]
    if (t == 1) and (f & 2): p = palette_offsets[3 * n]
    if (t == 1) and (f & 4) : p = palette_offsets[3 * n + 1]
    for c in range(4):
      r = ((palette_colors[p + 2 * c] & 0x1F)+1) << 3
      g = (((palette_colors[p + 2 * c] >> 5) + ((palette_colors[p + 2 * c + 1] & 3) << 3))+1) << 3
      b = (((palette_colors[p + 2 * c + 1] >> 2)+1) << 3)
      canvas.rectangle((x,y,x+32,y+16), fill = (r-1,g-1,b-1)) 
      x += 32
    x += 8
  canvas.text( (x - 4, y), "{: 2}".format(i), font = font, align ="left", fill ="black")
  y += 20
img.show() 
img.save(os.path.dirname(os.path.abspath(sys.argv[0])) +os.sep+'dmg-palettes.png')